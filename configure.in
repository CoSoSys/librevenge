AC_INIT(src/lib/WPXParser.cpp)

AM_CONFIG_HEADER(config.h)

AM_INIT_AUTOMAKE(libwpd, 0.1)

AC_PROG_CC

AC_PROG_CXX

AC_PROG_INSTALL

AC_PROG_LIBTOOL

AC_PATH_PROG(PKG_CONFIG, pkg-config, no)

PKG_CHECK_MODULES(LIBWPD,[
glib-2.0 >= 2.0.0
])

AC_ARG_ENABLE(debug,[  --enable-debug    Turn on debugging],[
	case "${enableval}" in
	   yes)	debug=true ;
		DEBUG_CFLAGS="-DDEBUG -g" ;;
	    no)	debug=false ;
		DEBUG_CFLAGS="-DNDEBUG" ;;
	     *)	AC_MSG_ERROR(bad value ${enableval} for --enable-debug) ;;
	esac
],[	debug=false
	DEBUG_CFLAGS="-DNDEBUG"
])
AM_CONDITIONAL(DEBUG, test x$debug = xtrue)

$LIBWPD_CXXFLAGS = "$LIBWPD_CFLAGS"

AC_SUBST(LIBWPD_CFLAGS)
AC_SUBST(DEBUG_CFLAGS)
AC_SUBST(LIBWPD_LIBS)

AC_OUTPUT([
Makefile
src/Makefile
src/lib/Makefile
])

case "$debug" in
     "true" )
        AC_MSG_RESULT([Configured with debugging symbols.]) ;;
esac